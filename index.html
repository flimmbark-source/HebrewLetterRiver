<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="manifest" href="/manifest.webmanifest" />
  <meta name="theme-color" content="#06b6d4" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Hebrew Letter River</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="apple-touch-icon" href="/icons/icon-192.png" />
</head>
<body class="bg-slate-900 text-white min-h-screen overflow-hidden">
  <div id="main-menu-view" class="flex items-center justify-center px-4">
    <div class="menu-card max-w-xl w-full rounded-3xl border border-slate-700 shadow-2xl p-8 sm:p-12 text-center space-y-6">
      <h1 class="text-4xl sm:text-5xl font-bold text-cyan-400 hebrew-font">Hebrew Letter River</h1>
      <p class="text-lg text-slate-300">
        Dive into flowing letters, learn their sounds, and test your reflexes in a playful Hebrew learning adventure.
      </p>
      <div class="grid gap-4 text-left text-sm text-slate-200 sm:grid-cols-2">
        <div class="p-4 bg-slate-800/70 rounded-2xl border border-slate-700">
          <h2 class="text-xl font-semibold text-cyan-300 mb-1">Practice Modes</h2>
          <p>Choose between consonants, vowel blends, or go all-in with expert mode.</p>
        </div>
        <div class="p-4 bg-slate-800/70 rounded-2xl border border-slate-700">
          <h2 class="text-xl font-semibold text-cyan-300 mb-1">Accessibility Ready</h2>
          <p>Adjust contrast, motion, speed, and intro prompts to suit every learner.</p>
        </div>
      </div>
      <button id="main-menu-start-button" class="w-full sm:w-auto bg-cyan-500 hover:bg-cyan-600 text-slate-900 font-bold py-3 px-6 rounded-full text-lg transition-transform hover:scale-105">
        Enter the River
      </button>
    </div>
  </div>

  <div id="game-view" class="hidden w-full h-[100dvh] overflow-hidden">
    <div id="game-container" class="w-full h-full text-center relative flex flex-col">
      <button id="back-to-menu-button" class="absolute top-4 left-4 z-40 bg-slate-800/90 border border-slate-700 text-sm sm:text-base px-3 sm:px-4 py-2 rounded-full flex items-center gap-2 hover:bg-slate-700 transition">
        <span class="text-lg">←</span>
        <span>Main Menu</span>
      </button>

      <div id="top-bar" class="flex items-center bg-slate-800 px-4 sm:px-6 py-3 sm:py-4 text-base sm:text-lg shadow-lg">
        <div class="flex-1 flex justify-center">
          <div class="flex items-baseline gap-2">
            <span class="font-bold text-slate-300">Level:</span>
            <span id="level" class="font-bold text-yellow-400 text-xl sm:text-2xl inline-block">1</span>
          </div>
        </div>
        <div class="flex items-center gap-6 ml-auto">
          <div>
            <span class="font-bold text-slate-300">Score:</span>
            <span id="score" class="font-bold text-cyan-400 text-xl sm:text-2xl inline-block">0</span>
          </div>
          <div id="lives-container" class="flex items-center gap-2"></div>
        </div>
      </div>

      <div id="play-area" class="relative flex-1 bg-slate-800 w-full overflow-hidden">
        <div id="learn-overlay" class="absolute top-2 sm:top-4 left-1/2 w-auto bg-slate-900/95 flex items-center justify-center py-2 sm:py-3 px-4 sm:px-8 rounded-lg z-20 gap-3 sm:gap-6 border border-slate-700">
          <div id="learn-letter" class="text-4xl sm:text-6xl font-bold text-cyan-400 hebrew-font"></div>
          <div class="flex flex-col text-center">
            <div id="learn-name" class="text-lg sm:text-2xl text-white"></div>
            <div id="learn-sound" class="text-sm sm:text-lg text-slate-300"></div>
          </div>
        </div>
      </div>

      <div id="choices-container" class="grid gap-3 p-4 sm:p-6 grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 w-full flex-shrink-0"></div>

      <div id="modal" class="fixed inset-0 bg-black/80 flex items-center justify-center p-3 sm:p-4 z-30 overflow-y-auto overscroll-contain">
        <div id="modal-content" class="text-center bg-slate-800 p-4 sm:p-6 md:p-8 rounded-2xl shadow-2xl w-full max-w-md sm:max-w-lg md:max-w-2xl relative mx-auto">
          <button id="accessibility-btn" class="absolute top-3 right-3 sm:top-4 sm:right-4 text-2xl text-slate-400 hover:text-cyan-400 transition">⚙️</button>

          <div id="setup-view">
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-cyan-400 hebrew-font mb-2">Hebrew Letter River</h1>
            <p id="modal-subtitle" class="text-slate-400 mb-4 sm:mb-6 text-sm sm:text-base"></p>
            <p class="text-lg sm:text-xl text-slate-300 mb-4 sm:mb-6">Choose what you want to practice:</p>

            <div class="flex flex-col sm:flex-row sm:flex-wrap gap-3 sm:gap-4 justify-center text-left max-w-lg mx-auto">
              <label class="setup-label">
                <input type="radio" name="gameMode" value="letters" checked class="hidden" />
                <div class="flex-grow p-3 border-2 border-slate-600 rounded-md">
                  <span class="font-bold text-white">Letters Only</span>
                  <p class="text-sm text-slate-400">Master the 22 core letters.</p>
                </div>
              </label>

              <label class="setup-label">
                <input type="radio" name="gameMode" value="vowels1" class="hidden" />
                <div class="flex-grow p-3 border-2 border-slate-600 rounded-md">
                  <span class="font-bold text-white">'A' &amp; 'O' Vowels</span>
                  <p class="text-sm text-slate-400">Practice Patach and Holam.</p>
                </div>
              </label>

              <label class="setup-label">
                <input type="radio" name="gameMode" value="vowels2" class="hidden" />
                <div class="flex-grow p-3 border-2 border-slate-600 rounded-md">
                  <span class="font-bold text-white">'E' &amp; 'I' Vowels</span>
                  <p class="text-sm text-slate-400">Practice Segol and Hirik.</p>
                </div>
              </label>

              <label class="setup-label">
                <input type="radio" name="gameMode" value="expert" class="hidden" />
                <div class="flex-grow p-3 border-2 border-slate-600 rounded-md">
                  <span class="font-bold text-white">Expert Mode</span>
                  <p class="text-sm text-slate-400">Mix of all letters &amp; vowels.</p>
                </div>
              </label>
            </div>
          </div>

          <div id="game-over-view" class="hidden">
            <h2 class="text-3xl sm:text-5xl font-bold text-cyan-400 mb-4 hebrew-font">Game Over</h2>
            <div class="learning-summary-container my-6"></div>
          </div>

          <button id="start-button" class="bg-cyan-500 hover:bg-cyan-600 text-slate-900 font-bold py-3 px-6 sm:px-8 rounded-lg text-lg sm:text-xl transition-transform hover:scale-105 mt-4 sm:mt-6 w-full sm:w-auto">
            Start Game
          </button>
          <button id="install-btn" class="bg-yellow-400 text-slate-900 font-bold py-3 px-4 rounded-lg mt-3 hidden">
            Install App
          </button>
        </div>
      </div>

      <div id="accessibility-view" class="hidden absolute z-40 text-left p-4 bg-slate-800 rounded-lg shadow-lg w-72 border border-slate-600">
        <button id="close-accessibility-btn" class="absolute top-2 right-3 text-2xl text-slate-400 hover:text-white">&times;</button>
        <h3 class="text-lg font-bold text-cyan-400 mb-4 text-center">Accessibility Options</h3>
        <div class="space-y-4">
          <div class="flex items-center justify-between">
            <label for="toggle-introductions" class="text-slate-300">Show Introductions</label>
            <input type="checkbox" id="toggle-introductions" class="h-5 w-5 rounded bg-slate-600 border-slate-500 text-cyan-500 focus:ring-cyan-600" checked />
          </div>
          <div class="flex items-center justify-between">
            <label for="high-contrast-toggle" class="text-slate-300">High Contrast Mode</label>
            <input type="checkbox" id="high-contrast-toggle" class="h-5 w-5 rounded bg-slate-600 border-slate-500 text-cyan-500 focus:ring-cyan-600" />
          </div>
          <div class="flex items-center justify-between">
            <label for="reduced-motion-toggle" class="text-slate-300">Reduced Motion</label>
            <input type="checkbox" id="reduced-motion-toggle" class="h-5 w-5 rounded bg-slate-600 border-slate-500 text-cyan-500 focus:ring-cyan-600" />
          </div>
          <div class="flex flex-col">
            <label for="game-speed-slider" class="text-slate-300 mb-2">Game Speed (<span id="speed-label">Normal</span>)</label>
            <input type="range" id="game-speed-slider" min="10" max="24" value="17" class="w-full" />
          </div>
        </div>
      </div>

      <div id="summary-tooltip" class="hidden absolute z-50 p-2 bg-slate-900 text-white rounded-md shadow-lg pointer-events-none border border-slate-600 text-center"></div>
      <div id="correct-answer-ghost" class="absolute text-green-400 text-xl font-bold pointer-events-none opacity-0 whitespace-nowrap"></div>
    </div>
  </div>

  <script type="module" src="/src/main.js"></script>
</body>
</html>
